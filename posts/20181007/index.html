<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head>
  <link href="https://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="generator" content="Hugo 0.60.1" />

  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>GASによるサーバー死活監視Slackボットを書いた &middot; さやかちゃんドットネット</title>
  <meta name="description" content="" />

  
  <link type="text/css" rel="stylesheet" href="https://blog.sayakachan.net/css/print.css" media="print">
  <link type="text/css" rel="stylesheet" href="https://blog.sayakachan.net/css/poole.css">
  <link type="text/css" rel="stylesheet" href="https://blog.sayakachan.net/css/syntax.css">
  <link type="text/css" rel="stylesheet" href="https://blog.sayakachan.net/css/hyde.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Abril+Fatface|PT+Sans:400,400i,700">


  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="/favicon.png">

  
  
  <meta name="twitter:card" content="summary"/>
  <meta name="twitter:image" content="https://blog.sayakachan.net/images/twitter_card_image.jpg"/>
  <meta name="twitter:title" content="GASによるサーバー死活監視Slackボットを書いた"/>
  <meta name="twitter:description" content="
     


タイトルのとおりです。ネタとしてはよくあるものです。自宅サーバーを家族に蹴っ飛ばされて落とされました。アニメの録画デーモンを動かしていたのですがサーバーが落ちていることに気が付かず、土曜日の深夜枠の録画に失敗しました。第1話だったのに&hellip;。腹が立ったので書きました。"/>
</head>

  <body class="theme-base-0a ">
  <aside class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <a href="https://blog.sayakachan.net/"><h1>blog.sayakachan.net</h1></a>
      <p class="lead">
       とある情報系学生のブログです。 
      </p>
    </div>

    <nav>
      <ul class="sidebar-nav">
        
        <li><a href="https://sayakachan.net/"> Portfolio </a></li>
      </ul>
    </nav>

    
    <p>&copy; 2019 sayakachan.net</p>
  </div>
</aside>

    <main class="content container">
    <div class="post">
  <h1>GASによるサーバー死活監視Slackボットを書いた</h1>
  <time datetime=2018-10-07T21:47:36Z class="post-date">Sun, Oct 7, 2018</time>
  <figure>
    <img src="/images/20181007/214612.png"/> 
</figure>

<p>タイトルのとおりです。ネタとしてはよくあるものです。自宅サーバーを家族に蹴っ飛ばされて落とされました。アニメの録画デーモンを動かしていたのですがサーバーが落ちていることに気が付かず、土曜日の深夜枠の録画に失敗しました。第1話だったのに&hellip;。腹が立ったので書きました。</p>
<h1 id="heading">できたもの</h1>
<p>記事上部の画像のように、さやかちゃんがSlackで鯖落ちを教えてくれます。</p>
<h1 id="gas">GASについて</h1>
<p>こちらの記事が良かったです。</p>
<p><a href="https://devpixiv.hatenablog.com/entry/2016/12/19/180000">Google Apps Scriptで業務を効率化！ 大切なものは全てGoogle先生が作ってくれていた - pixiv inside [archive]</a></p>
<h1 id="heading1">コードを書くときに見たところ</h1>
<ul>
<li>
<p>GASのUrlFetchAppとHTTPResponseのリファレンス</p>
<ul>
<li><a href="https://developers.google.com/apps-script/reference/url-fetch/url-fetch-app">https://developers.google.com/apps-script/reference/url-fetch/url-fetch-app</a></li>
<li><a href="https://developers.google.com/apps-script/reference/url-fetch/http-response">https://developers.google.com/apps-script/reference/url-fetch/http-response</a></li>
</ul>
</li>
<li>
<p>Slackのchat.postMessageのリファレンス</p>
<ul>
<li><a href="https://api.slack.com/methods/chat.postMessage">https://api.slack.com/methods/chat.postMessage</a></li>
</ul>
</li>
</ul>
<h1 id="heading2">作成したコード</h1>
<p>Gist上に公開しています。</p>
<script type="application/javascript" src="https://gist.github.com/8q/f6c2fdb4b68fe03e65aa42be8bfda3f4.js?file=gas_slack_bot.gs"></script>

<p>スクリプトのプロパティはファイル-&gt;プロジェクトのプロパティ-&gt;スクリプトのプロパティから設定できます。
<figure>
    <img src="/images/20181007/214426.png"/> 
</figure>
</p>
<p>編集-&gt;現在のプロジェクトのトリガーからトリガーを設定して30分毎にmainが走るようにしています。
<figure>
    <img src="/images/20181007/215559.png"/> 
</figure>
</p>
</div>


    </main>

    
  </body>
</html>
